<!DOCTYPE html>
<html lang="ne">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nepal GK Secure Quiz | Ujwal</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="quiz-container glass">
    <h1>Nepal General Knowledge Secure Quiz</h1>
    <p id="timer">Time left: 05:00</p>

    <form id="quizForm">
      <input type="text" id="playerName" placeholder="Enter your full name" required />
      <input type="email" id="playerEmail" placeholder="Enter your email (required for result)" required />

      <div id="questions-wrapper"></div>

      <button type="button" id="submitBtn" onclick="submitQuiz()">Submit Quiz</button>
      <div id="resultBox"></div>
    </form>
  </div>

  <script>
    /* ========================
       1Ô∏è‚É£ QUIZ QUESTIONS ARRAY
       ======================== */
    const quizData = [
      {
        q: "1Ô∏è‚É£ ‡§®‡•á‡§™‡§æ‡§≤‡§Æ‡§æ ‡§™‡§π‡§ø‡§≤‡•ã ‡§∞‡•á‡§≤‡§∏‡•á‡§µ‡§æ ‡§ï‡§π‡§æ‡§Å ‡§∏‡§û‡•ç‡§ö‡§æ‡§≤‡§® ‡§≠‡§Ø‡•ã?<br>When and where was Nepal‚Äôs first railway service operated?",
        options: ["Raxaul ‚Äì Amlekhganj","Birgunj ‚Äì Simara","Janakpur ‚Äì Jaynagar","Biratnagar ‚Äì Rangeli"],
        correct: 0
      },
      {
        q: "2Ô∏è‚É£ ‡§®‡•á‡§™‡§æ‡§≤‡§ï‡•ã ‡§™‡§π‡§ø‡§≤‡•ã ‡§ú‡§≤‡§µ‡§ø‡§¶‡•ç‡§Ø‡•Å‡§§‡•ç ‡§Ü‡§Ø‡•ã‡§ú‡§®‡§æ ‡§ï‡•Å‡§® ‡§π‡•ã?<br>Which was Nepal‚Äôs first hydroelectric project?",
        options: ["Pharping","Trishuli","Kulekhani","Sunkoshi"],
        correct: 0
      },
      {
        q: "3Ô∏è‚É£ ‡§®‡•á‡§™‡§æ‡§≤‡§ï‡•ã ‡§™‡§π‡§ø‡§≤‡•ã ‡§¨‡•à‡§Ç‡§ï ‡§ï‡•Å‡§® ‡§π‡•ã?<br>Which is Nepal‚Äôs first bank?",
        options: ["Nepal Bank Limited","Nepal Rastra Bank","Agriculture Development Bank","Rastriya Banijya Bank"],
        correct: 0
      },
      {
        q: "4Ô∏è‚É£ ‡§®‡•á‡§™‡§æ‡§≤‡§ï‡•ã ‡§™‡§π‡§ø‡§≤‡•ã ‡§∏‡§Ç‡§µ‡§ø‡§ß‡§æ‡§® ‡§ï‡•Å‡§® ‡§µ‡§∞‡•ç‡§∑‡§Æ‡§æ ‡§ú‡§æ‡§∞‡•Ä ‡§ó‡§∞‡§ø‡§è‡§ï‡•ã ‡§•‡§ø‡§Ø‡•ã?<br>In which year was Nepal‚Äôs first constitution promulgated?",
        options: ["1948 A.D. (2004 B.S.)","1951 A.D. (2008 B.S.)","1962 A.D. (2019 B.S.)","1990 A.D. (2047 B.S.)"],
        correct: 0
      },
      {
        q: "5Ô∏è‚É£ ‡§®‡•á‡§™‡§æ‡§≤ ‡§∏‡§Ç‡§Ø‡•Å‡§ï‡•ç‡§§ ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡§∏‡§Ç‡§ò‡§ï‡•ã ‡§∏‡§¶‡§∏‡•ç‡§Ø ‡§ï‡§π‡§ø‡§≤‡•á ‡§≠‡§è‡§ï‡•ã ‡§π‡•ã?<br>When did Nepal join the United Nations?",
        options: ["1955 A.D.","1950 A.D.","1957 A.D.","1961 A.D."],
        correct: 0
      },
      {
        q: "6Ô∏è‚É£ ‡§®‡•á‡§™‡§æ‡§≤‡§ï‡•ã ‡§™‡§π‡§ø‡§≤‡•ã ‡§µ‡§ø‡§∂‡•ç‡§µ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§≤‡§Ø ‡§ï‡•Å‡§® ‡§π‡•ã?<br>Which is the first university of Nepal?",
        options: ["Tribhuvan University","Kathmandu University","Purbanchal University","Mid-Western University"],
        correct: 0
      },
      {
        q: "7Ô∏è‚É£ ‡§®‡•á‡§™‡§æ‡§≤‡•Ä ‡§≠‡§æ‡§∑‡§æ‡§Æ‡§æ ‡§õ‡§æ‡§Ø‡§æ‡§ô‡•ç‡§ï‡§® ‡§ó‡§∞‡§ø‡§è‡§ï‡•ã ‡§™‡§π‡§ø‡§≤‡•ã ‡§ö‡§≤‡§ö‡§ø‡§§‡•ç‡§∞ ‡§ï‡•Å‡§® ‡§π‡•ã?<br>Which was the first Nepali-language film shot in Nepal?",
        options: ["Aama","Satya Harischandra","Maitighar","Harischandra"],
        correct: 0
      },
      {
        q: "8Ô∏è‚É£ ‡§®‡•á‡§™‡§æ‡§≤‡§ï‡•ã ‡§∏‡§Ç‡§µ‡§ø‡§ß‡§æ‡§® ‡•®‡•¶‡•≠‡•® ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞ ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡§ø‡§Ø ‡§∏‡§≠‡§æ‡§Æ‡§æ ‡§ï‡§§‡§ø ‡§∏‡§¶‡§∏‡•ç‡§Ø ‡§π‡•Å‡§®‡•ç‡§õ‡§®‡•ç?<br>According to the Constitution of Nepal 2072, how many members are there in the National Assembly?",
        options: ["59","56","60","61"],
        correct: 0
      },
      {
        q: "9Ô∏è‚É£ ‡§®‡•á‡§™‡§æ‡§≤‡§ï‡•ã ‡§™‡§π‡§ø‡§≤‡•ã ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡§ø‡§Ø ‡§ú‡§®‡§ó‡§£‡§®‡§æ ‡§ï‡§π‡§ø‡§≤‡•á ‡§ó‡§∞‡§ø‡§è‡§ï‡•ã ‡§π‡•ã?<br>When was Nepal‚Äôs first national census conducted?",
        options: ["1911 A.D.","1941 A.D.","1952 A.D.","1961 A.D."],
        correct: 0
      },
      {
        q: "üîü ‡§®‡•á‡§™‡§æ‡§≤‡§≤‡•á SAARC ‡§ï‡•ã ‡§∏‡•ç‡§•‡§æ‡§™‡§®‡§æ ‡§∏‡§Æ‡•ç‡§ù‡•å‡§§‡§æ ‡§ï‡§π‡§ø‡§≤‡•á ‡§∏‡§æ‡§á‡§® ‡§ó‡§∞‡•á‡§ï‡•ã ‡§•‡§ø‡§Ø‡•ã?<br>When did Nepal sign the SAARC Charter?",
        options: ["8 December 1985","6 January 1984","10 December 1986","1 November 1985"],
        correct: 0
      },
      {
        q: "1Ô∏è‚É£1Ô∏è‚É£ ‡§®‡•á‡§™‡§æ‡§≤‡§ï‡•ã ‡§™‡§π‡§ø‡§≤‡•ã ‡§Ü‡§®‡•ç‡§§‡§∞‡§ø‡§ï ‡§â‡§°‡§æ‡§® ‡§ï‡§π‡§ø‡§≤‡•á ‡§≠‡§è‡§ï‡•ã ‡§•‡§ø‡§Ø‡•ã?<br>When was Nepal‚Äôs first domestic flight operated?",
        options: ["1950 A.D., Kathmandu‚ÄìSimara","1949 A.D., Kathmandu‚ÄìPokhara","1950 A.D., Kathmandu‚ÄìBiratnagar","1951 A.D., Kathmandu‚ÄìJanakpur"],
        correct: 0
      }
    ];

    /* ===== SHUFFLE QUESTIONS ===== */
    quizData.sort(() => Math.random() - 0.5);

    /* ===== DISPLAY QUESTIONS ===== */
    const wrapper = document.getElementById("questions-wrapper");
    quizData.forEach((item, index) => {
      const div = document.createElement("div");
      div.classList.add("question");
      div.dataset.correct = String.fromCharCode(97 + item.correct); // a,b,c,d
      let html = `<h3>${item.q}</h3>`;
      item.options.forEach((opt, i) => {
        const val = String.fromCharCode(97 + i);
        html += `<label><input type="radio" name="q${index + 1}" value="${val}"> ${opt}</label>`;
      });
      div.innerHTML = html;
      wrapper.appendChild(div);
    });

    /* ===== TIMER ===== */
    let timeLeft=300;
    const timerDisplay=document.getElementById("timer");
    const countdown=setInterval(()=>{
      const m=Math.floor(timeLeft/60);
      const s=timeLeft%60;
      timerDisplay.textContent=`Time left: ${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
      timeLeft--;
      if(timeLeft<0){clearInterval(countdown);alert("‚è∞ Time is up! Auto-submitting your quiz.");submitQuiz();}
    },1000);

    /* ===== ANTI-CHEAT ===== */
    window.onblur=()=>{alert("‚ö†Ô∏è Tab switch not allowed! Auto-submit triggered.");submitQuiz();};
    document.addEventListener('copy',e=>e.preventDefault());
    document.addEventListener('paste',e=>e.preventDefault());

    /* ===== SUBMIT ===== */
    function submitQuiz(){
      clearInterval(countdown);
      document.getElementById("submitBtn").disabled=true;
      const name=document.getElementById("playerName").value.trim();
      const email=document.getElementById("playerEmail").value.trim();
      let score=0;

      const questions=document.querySelectorAll(".question");
      questions.forEach(q=>{
        const correct=q.dataset.correct;
        const selected=q.querySelector('input[type="radio"]:checked');
        const labels=q.querySelectorAll("label");
        labels.forEach(l=>l.classList.remove("correct","wrong"));
        if(selected){
          if(selected.value===correct){score++;selected.parentElement.classList.add("correct");}
          else{selected.parentElement.classList.add("wrong");q.querySelector(`input[value="${correct}"]`).parentElement.classList.add("correct");}
        }else{q.querySelector(`input[value="${correct}"]`).parentElement.classList.add("correct");}
      });

      const percent=Math.round((score/quizData.length)*100);
      const remark=percent>=90?"üèÜ Excellent!":percent>=70?"üëè Very Good!":percent>=50?"üôÇ Fair effort!":"üìñ Keep practicing!";

      const resultBox=document.getElementById("resultBox");
      resultBox.style.display="block";
      resultBox.innerHTML=`<h3>Result for ${name}</h3><p>Score: ${score}/${quizData.length} (${percent}%)</p><p>${remark}</p><p>‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶! Thank you for participating </p>`;

      // collect answers
      const answers={};
      document.querySelectorAll('input[type="radio"]:checked').forEach(a=>answers[a.name]=a.value);

      // send to Google Sheet
      fetch("https://script.google.com/macros/s/AKfycbzuE960kQFPwXUKEVHh-v5NY-ugY_s_DTykrGi47Ao5vXq_Xcgc0Z853VqmtNcX7G3Nbg/exec",{
        method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},
        body:JSON.stringify({name,email,score,percent,remark,answers,time:new Date().toLocaleString()})
      });
    }
  </script>
</body>
</html>

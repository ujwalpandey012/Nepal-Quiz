<!DOCTYPE html>
<html lang="ne">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nepal GK Secure Quiz | Ujwal Pandey</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="quiz-container glass">
    <h1>ЁЯЗ│ЁЯЗ╡ Nepal General Knowledge Secure Quiz</h1>
    <p id="timer">тП▒я╕П Time left: 05:00</p>

    <form id="quizForm">
      <input type="text" id="playerName" placeholder="Enter your full name" required />
      <input type="email" id="playerEmail" placeholder="Enter your email (required for result)" required />

      <div id="questions-wrapper"></div>

      <button type="button" id="submitBtn" onclick="submitQuiz()">Submit Quiz</button>
      <div id="resultBox"></div>
    </form>
  </div>

<script>

  /* ===============================
     11 Nepal GK Quiz Questions
  =============================== */
  const quizData = [
    { q: "рдиреЗрдкрд╛рд▓рдорд╛ рдкрд╣рд┐рд▓реЛ рд░реЗрд▓рд╕реЗрд╡рд╛ рдХрд╣рд╛рдБ рд╕рдЮреНрдЪрд╛рд▓рди рднрдпреЛ?<br>When and where was NepalтАЩs first railway service operated?", options: ["Raxaul тАУ Amlekhganj","Birgunj тАУ Simara","Janakpur тАУ Jaynagar","Biratnagar тАУ Rangeli"], correct: "Raxaul тАУ Amlekhganj" },
    { q: "рдиреЗрдкрд╛рд▓рдХреЛ рдкрд╣рд┐рд▓реЛ рдЬрд▓рд╡рд┐рджреНрдпреБрддреН рдЖрдпреЛрдЬрдирд╛ рдХреБрди рд╣реЛ?<br>Which was NepalтАЩs first hydroelectric project?", options: ["Pharping","Trishuli","Kulekhani","Sunkoshi"], correct: "Pharping" },
    { q: "рдиреЗрдкрд╛рд▓рдХреЛ рдкрд╣рд┐рд▓реЛ рдмреИрдВрдХ рдХреБрди рд╣реЛ?<br>Which is NepalтАЩs first bank?", options: ["Nepal Bank Limited","Nepal Rastra Bank","Agriculture Development Bank","Rastriya Banijya Bank"], correct: "Nepal Bank Limited" },
    { q: "рдиреЗрдкрд╛рд▓рдХреЛ рдкрд╣рд┐рд▓реЛ рд╕рдВрд╡рд┐рдзрд╛рди рдХреБрди рд╡рд░реНрд╖рдорд╛ рдЬрд╛рд░реА рдЧрд░рд┐рдПрдХреЛ рдерд┐рдпреЛ?<br>In which year was NepalтАЩs first constitution promulgated?", options: ["1948 A.D. (2004 B.S.)","1951 A.D. (2008 B.S.)","1962 A.D. (2019 B.S.)","1990 A.D. (2047 B.S.)"], correct: "1948 A.D. (2004 B.S.)" },
    { q: "рдиреЗрдкрд╛рд▓ рд╕рдВрдпреБрдХреНрдд рд░рд╛рд╖реНрдЯреНрд░рд╕рдВрдШрдХреЛ рд╕рджрд╕реНрдп рдХрд╣рд┐рд▓реЗ рднрдПрдХреЛ рд╣реЛ?<br>When did Nepal join the United Nations?", options: ["1955 A.D.","1950 A.D.","1957 A.D.","1961 A.D."], correct: "1955 A.D." },
    { q: "рдиреЗрдкрд╛рд▓рдХреЛ рдкрд╣рд┐рд▓реЛ рд╡рд┐рд╢реНрд╡рд╡рд┐рджреНрдпрд╛рд▓рдп рдХреБрди рд╣реЛ?<br>Which is the first university of Nepal?", options: ["Tribhuvan University","Kathmandu University","Purbanchal University","Mid-Western University"], correct: "Tribhuvan University" },
    { q: "рдиреЗрдкрд╛рд▓реА рднрд╛рд╖рд╛рдорд╛ рдЫрд╛рдпрд╛рдЩреНрдХрди рдЧрд░рд┐рдПрдХреЛ рдкрд╣рд┐рд▓реЛ рдЪрд▓рдЪрд┐рддреНрд░ рдХреБрди рд╣реЛ?<br>Which was the first Nepali-language film shot in Nepal?", options: ["Aama","Satya Harischandra","Maitighar","Harischandra"], correct: "Aama" },
    { q: "рдиреЗрдкрд╛рд▓рдХреЛ рд╕рдВрд╡рд┐рдзрд╛рди реирежренреи рдЕрдиреБрд╕рд╛рд░ рд░рд╛рд╖реНрдЯреНрд░рд┐рдп рд╕рднрд╛рдорд╛ рдХрддрд┐ рд╕рджрд╕реНрдп рд╣реБрдиреНрдЫрдиреН?<br>According to the Constitution of Nepal 2072, how many members are in the National Assembly?", options: ["59","56","60","61"], correct: "59" },
    { q: "рдиреЗрдкрд╛рд▓рдХреЛ рдкрд╣рд┐рд▓реЛ рд░рд╛рд╖реНрдЯреНрд░рд┐рдп рдЬрдирдЧрдгрдирд╛ рдХрд╣рд┐рд▓реЗ рдЧрд░рд┐рдПрдХреЛ рд╣реЛ?<br>When was NepalтАЩs first national census conducted?", options: ["1911 A.D.","1941 A.D.","1952 A.D.","1961 A.D."], correct: "1911 A.D." },
    { q: "рдиреЗрдкрд╛рд▓рд▓реЗ SAARC рдХреЛ рд╕реНрдерд╛рдкрдирд╛ рд╕рдореНрдЭреМрддрд╛ рдХрд╣рд┐рд▓реЗ рд╕рд╛рдЗрди рдЧрд░реЗрдХреЛ рдерд┐рдпреЛ?<br>When did Nepal sign the SAARC Charter?", options: ["8 December 1985","6 January 1984","10 December 1986","1 November 1985"], correct: "8 December 1985" },
    { q: "рдиреЗрдкрд╛рд▓рдХреЛ рдкрд╣рд┐рд▓реЛ рдЖрдиреНрддрд░рд┐рдХ рдЙрдбрд╛рди рдХрд╣рд┐рд▓реЗ рднрдПрдХреЛ рдерд┐рдпреЛ?<br>When was NepalтАЩs first domestic flight operated?", options: ["1950 A.D., KathmanduтАУSimara","1949 A.D., KathmanduтАУPokhara","1950 A.D., KathmanduтАУBiratnagar","1951 A.D., KathmanduтАУJanakpur"], correct: "1950 A.D., KathmanduтАУSimara" }
  ];

  /* Shuffle Utility */
  function shuffle(arr) {
    for (let i = arr.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr;
  }

  shuffle(quizData);
  quizData.forEach(q => q.options = shuffle(q.options));

  /* Display Questions */
  const wrapper = document.getElementById("questions-wrapper");
  quizData.forEach((item, i) => {
    const div = document.createElement("div");
    div.classList.add("question");

    let html = `<h3>${i + 1}. ${item.q}</h3>`;
    item.options.forEach(opt => {
      html += `<label><input type="radio" name="q${i}" value="${opt}"> ${opt}</label>`;
    });

    div.innerHTML = html;
    wrapper.appendChild(div);
  });

  /* Timer */
  let timeLeft = 300;
  const timerDisplay = document.getElementById("timer");
  const countdown = setInterval(() => {
    const m = Math.floor(timeLeft / 60);
    const s = timeLeft % 60;
    timerDisplay.textContent = `тП▒я╕П Time left: ${m.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`;
    timeLeft--;
    if (timeLeft < 0) { clearInterval(countdown); alert("тП░ Time up! Auto-submitting."); submitQuiz(); }
  }, 1000);

  /* Anti-cheat */
  window.onblur = () => {
    alert("тЪая╕П Tab switch detected! Auto-submitting your quiz.");
    submitQuiz();
  };

  /* FINAL SUBMIT FUNCTION */
  async function submitQuiz() {
    clearInterval(countdown);
    document.getElementById("submitBtn").disabled = true;

    const name = document.getElementById("playerName").value.trim();
    const email = document.getElementById("playerEmail").value.trim();

    if (!name || !email) return alert("Please enter your name and email!");

    let score = 0;
    const answersDetailed = [];

    document.querySelectorAll(".question").forEach((q, i) => {
      const selected = q.querySelector("input[type='radio']:checked");
      const correctAns = quizData[i].correct;
      const userAns = selected ? selected.value : "Not answered";
      const correct = userAns === correctAns;
      if (correct) score++;

      answersDetailed.push({
        question: quizData[i].q,
        user: userAns,
        correctAns,
        correct
      });
    });

    const percent = ((score / quizData.length) * 100).toFixed(2);
    const remark =
      percent >= 90 ? "ЁЯПЖ Excellent" :
      percent >= 70 ? "ЁЯСП Very Good" :
      percent >= 50 ? "ЁЯЩВ Fair" : "ЁЯУШ Keep Practicing";

    document.getElementById("resultBox").innerHTML = `
      <h3>${name}, your result:</h3>
      <p>Score: ${score}/${quizData.length} (${percent}%)</p>
      <p>${remark}</p>
      <p>Your certificate + answers are being emailed...</p>
    `;
    document.getElementById("resultBox").style.display = "block";

    /* SEND TO GOOGLE SCRIPT */
    await fetch("https://script.google.com/macros/s/AKfycbyRd_bc5_lAm1s3uukkQ_q5YaxC02hqt14FCt6vXINTulNZkuGrxe-TAQG-kLImkyVMxQ/exec", {
      method: "POST",
      mode: "no-cors",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        name,
        email,
        score,
        percent,
        remark,
        total: quizData.length,
        answersDetailed
      })
    });

    setTimeout(() => alert("тЬЕ Your score + certificate have been emailed!"), 1500);
  }

</script>
</body>
</html>
